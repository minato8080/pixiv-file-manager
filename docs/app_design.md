# 機能一覧

## タグ取得機能

1. エクスプローラーを開いてフォルダを選択させる。（複数可）
2. フォルダ配下の画像ファイル名からidを配列に抽出。_p0などが付いている場合があり、それは除去する。
3. idの配列を1秒単位で検索し、見つかったタグ情報を`TAG_INFO.tags`に書き込む。
4. 完了したら検索したファイル数、検索に失敗したファイル数、処理時間をダイアログで表示する。
5. ダイアログの失敗情報詳細ボタンを押すと検索に失敗したファイルのパスをすべて表示する。

## DB更新機能

1. 指定フォルダ配下の作成時間と更新時間が`DB_INFO.update_time`以降のものを検索する。
2. DBに登録がない場合、タグ取得機能を呼び出す。
3. DBに登録がある場合、`DIR_INFO.save_dir`を更新する。
4. `DIR_INFO.count`が実際のファイル数と異なる場合、削除されたidを検索し、DBを同期する。

## タグ検索機能
1. タグ一覧をDBの`TAG_INFO.tag`から取得、プルダウンに入れる
1. タグプルダウンで選択したものは、タグリストビューに追加される
1. タグリストビューのマイナスボタンでリストから除外する
1. タグはAND条件もしくはOR条件を指定して検索
1. 検索後にエクスプローラービューにサムネイルを一覧表示する。
1. 検索履歴を自動保存し、何らかのUIで条件再現できるようにする（10件）

## 分類機能

1. 検索機能の検索結果を指定のフォルダに移動して`DIR_INFO.save_dir`も更新
2. `DIR_INFO.character`にダイアログでフォルダ名を使用するか確認、
   - yes -> フォルダ名を使用
   - no -> テキストボックスを表示して任意入力